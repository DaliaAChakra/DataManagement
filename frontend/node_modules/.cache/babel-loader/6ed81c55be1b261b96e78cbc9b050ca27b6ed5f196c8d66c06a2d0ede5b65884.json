{"ast":null,"code":"import _objectSpread from\"C:/Users/Softech/Documents/DataManagementSystem/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const CRUDOperations=_ref=>{let{token,tableName}=_ref;const[data,setData]=useState([]);const[record,setRecord]=useState({});// To store new record input\nconst fetchData=async()=>{try{const response=await axios.get(\"http://127.0.0.1:8000/api/crud/\".concat(tableName,\"/\"),{headers:{Authorization:\"Bearer \".concat(token)}});setData(response.data);}catch(error){console.error(\"Error fetching data:\",error);}};useEffect(()=>{if(tableName){fetchData();}},[tableName,token]);const handleAddRecord=async()=>{try{const response=await axios.post(\"http://127.0.0.1:8000/api/crud/\".concat(tableName,\"/\"),record,{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"Record added:\",response.data);fetchData();// Refresh data after adding a record\n}catch(error){console.error(\"Error adding record:\",error);}};const handleInputChange=event=>{setRecord(_objectSpread(_objectSpread({},record),{},{[event.target.name]:event.target.value}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"CRUD Operations for \",tableName]}),/*#__PURE__*/_jsx(\"ul\",{children:data.map(item=>/*#__PURE__*/_jsxs(\"li\",{children:[item.name,\" \"]},item.id))}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Add a Record\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Record Name\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddRecord,children:\"Add Record\"})]})]});};export default CRUDOperations;","map":{"version":3,"names":["React","useEffect","useState","axios","jsxs","_jsxs","jsx","_jsx","CRUDOperations","_ref","token","tableName","data","setData","record","setRecord","fetchData","response","get","concat","headers","Authorization","error","console","handleAddRecord","post","log","handleInputChange","event","_objectSpread","target","name","value","children","map","item","id","type","placeholder","onChange","onClick"],"sources":["C:/Users/Softech/Documents/DataManagementSystem/frontend/src/components/CRUDOperations.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst CRUDOperations = ({ token, tableName }) => {\r\n  const [data, setData] = useState([]);\r\n  const [record, setRecord] = useState({}); // To store new record input\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const response = await axios.get(\r\n        `http://127.0.0.1:8000/api/crud/${tableName}/`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      setData(response.data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching data:\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tableName) {\r\n      fetchData();\r\n    }\r\n  }, [tableName, token]);\r\n\r\n  const handleAddRecord = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        `http://127.0.0.1:8000/api/crud/${tableName}/`,\r\n        record,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Record added:\", response.data);\r\n      fetchData(); // Refresh data after adding a record\r\n    } catch (error) {\r\n      console.error(\"Error adding record:\", error);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (event) => {\r\n    setRecord({\r\n      ...record,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>CRUD Operations for {tableName}</h2>\r\n      <ul>\r\n        {data.map((item) => (\r\n          <li key={item.id}>\r\n            {item.name} {/* Adjust this based on your data structure */}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n      <div>\r\n        <h3>Add a Record</h3>\r\n        <input\r\n          type=\"text\"\r\n          name=\"name\"\r\n          placeholder=\"Record Name\"\r\n          onChange={handleInputChange}\r\n        />\r\n        <button onClick={handleAddRecord}>Add Record</button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CRUDOperations;\r\n"],"mappings":"6IAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAA0B,IAAzB,CAAEC,KAAK,CAAEC,SAAU,CAAC,CAAAF,IAAA,CAC1C,KAAM,CAACG,IAAI,CAAEC,OAAO,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CACpC,KAAM,CAACY,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAE;AAE1C,KAAM,CAAAc,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACe,GAAG,mCAAAC,MAAA,CACIR,SAAS,MAC3C,CACES,OAAO,CAAE,CACPC,aAAa,WAAAF,MAAA,CAAYT,KAAK,CAChC,CACF,CACF,CAAC,CACDG,OAAO,CAACI,QAAQ,CAACL,IAAI,CAAC,CACxB,CAAE,MAAOU,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAEDrB,SAAS,CAAC,IAAM,CACd,GAAIU,SAAS,CAAE,CACbK,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,CAACL,SAAS,CAAED,KAAK,CAAC,CAAC,CAEtB,KAAM,CAAAc,eAAe,CAAG,KAAAA,CAAA,GAAY,CAClC,GAAI,CACF,KAAM,CAAAP,QAAQ,CAAG,KAAM,CAAAd,KAAK,CAACsB,IAAI,mCAAAN,MAAA,CACGR,SAAS,MAC3CG,MAAM,CACN,CACEM,OAAO,CAAE,CACPC,aAAa,WAAAF,MAAA,CAAYT,KAAK,CAChC,CACF,CACF,CAAC,CACDa,OAAO,CAACG,GAAG,CAAC,eAAe,CAAET,QAAQ,CAACL,IAAI,CAAC,CAC3CI,SAAS,CAAC,CAAC,CAAE;AACf,CAAE,MAAOM,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAED,KAAM,CAAAK,iBAAiB,CAAIC,KAAK,EAAK,CACnCb,SAAS,CAAAc,aAAA,CAAAA,aAAA,IACJf,MAAM,MACT,CAACc,KAAK,CAACE,MAAM,CAACC,IAAI,EAAGH,KAAK,CAACE,MAAM,CAACE,KAAK,EACxC,CAAC,CACJ,CAAC,CAED,mBACE3B,KAAA,QAAA4B,QAAA,eACE5B,KAAA,OAAA4B,QAAA,EAAI,sBAAoB,CAACtB,SAAS,EAAK,CAAC,cACxCJ,IAAA,OAAA0B,QAAA,CACGrB,IAAI,CAACsB,GAAG,CAAEC,IAAI,eACb9B,KAAA,OAAA4B,QAAA,EACGE,IAAI,CAACJ,IAAI,CAAC,GAAC,GADLI,IAAI,CAACC,EAEV,CACL,CAAC,CACA,CAAC,cACL/B,KAAA,QAAA4B,QAAA,eACE1B,IAAA,OAAA0B,QAAA,CAAI,cAAY,CAAI,CAAC,cACrB1B,IAAA,UACE8B,IAAI,CAAC,MAAM,CACXN,IAAI,CAAC,MAAM,CACXO,WAAW,CAAC,aAAa,CACzBC,QAAQ,CAAEZ,iBAAkB,CAC7B,CAAC,cACFpB,IAAA,WAAQiC,OAAO,CAAEhB,eAAgB,CAAAS,QAAA,CAAC,YAAU,CAAQ,CAAC,EAClD,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}