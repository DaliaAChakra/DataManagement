{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CreateTable=_ref=>{let{token}=_ref;const[tableName,setTableName]=useState(\"\");const[fields,setFields]=useState([{name:\"\",type:\"\",is_unique:false}]);const fieldTypes=[\"VARCHAR(255)\",\"INTEGER\",\"DATE\",\"BOOLEAN\"];// Add more field types as needed\nconst handleAddField=()=>{setFields([...fields,{name:\"\",type:\"\",is_unique:false}]);};const handleFieldChange=(index,event)=>{const values=[...fields];values[index][event.target.name]=event.target.value;setFields(values);};const handleDeleteField=index=>{const values=[...fields];values.splice(index,1);setFields(values);};const handleUniqueChange=index=>{const values=[...fields];values[index].is_unique=!values[index].is_unique;setFields(values);};const handleCreateTable=async()=>{console.log(\"Table Name:\",tableName);console.log(\"Fields:\",fields);// Check the fields data\ntry{const response=await axios.post(\"http://127.0.0.1:8000/api/create_table/\",{name:tableName,fields:fields},{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"Table created:\",response.data);}catch(error){console.error(\"Error creating table:\",error);}};const handleDeleteTable=async()=>{try{const response=await axios.delete(\"http://127.0.0.1:8000/api/delete_table/\".concat(tableName,\"/\"),{headers:{Authorization:\"Bearer \".concat(token)}});console.log(\"Table deleted:\",response.data);}catch(error){console.error(\"Error deleting table:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create Table\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:tableName,onChange:e=>setTableName(e.target.value),placeholder:\"Table Name\"}),/*#__PURE__*/_jsx(\"div\",{children:fields.map((field,index)=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:field.name,onChange:e=>handleFieldChange(index,e),placeholder:\"Field Name\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",value:field.type,onChange:e=>handleFieldChange(index,e),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Type\"}),fieldTypes.map((type,i)=>/*#__PURE__*/_jsx(\"option\",{value:type,children:type},i))]}),/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:field.is_unique,onChange:()=>handleUniqueChange(index)}),\"Unique\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteField(index),children:\"Delete Field\"})]},index))}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddField,children:\"Add Field\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateTable,children:\"Create Table\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDeleteTable,children:\"Delete Table\"})]});};export default CreateTable;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","CreateTable","_ref","token","tableName","setTableName","fields","setFields","name","type","is_unique","fieldTypes","handleAddField","handleFieldChange","index","event","values","target","value","handleDeleteField","splice","handleUniqueChange","handleCreateTable","console","log","response","post","headers","Authorization","concat","data","error","handleDeleteTable","delete","children","onChange","e","placeholder","map","field","i","checked","onClick"],"sources":["C:/Users/Softech/Documents/DataManagementSystem/frontend/src/components/CreateTable.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst CreateTable = ({ token }) => {\r\n  const [tableName, setTableName] = useState(\"\");\r\n  const [fields, setFields] = useState([\r\n    { name: \"\", type: \"\", is_unique: false },\r\n  ]);\r\n\r\n  const fieldTypes = [\"VARCHAR(255)\", \"INTEGER\", \"DATE\", \"BOOLEAN\"]; // Add more field types as needed\r\n\r\n  const handleAddField = () => {\r\n    setFields([...fields, { name: \"\", type: \"\", is_unique: false }]);\r\n  };\r\n\r\n  const handleFieldChange = (index, event) => {\r\n    const values = [...fields];\r\n    values[index][event.target.name] = event.target.value;\r\n    setFields(values);\r\n  };\r\n\r\n  const handleDeleteField = (index) => {\r\n    const values = [...fields];\r\n    values.splice(index, 1);\r\n    setFields(values);\r\n  };\r\n\r\n  const handleUniqueChange = (index) => {\r\n    const values = [...fields];\r\n    values[index].is_unique = !values[index].is_unique;\r\n    setFields(values);\r\n  };\r\n\r\n  const handleCreateTable = async () => {\r\n    console.log(\"Table Name:\", tableName);\r\n    console.log(\"Fields:\", fields); // Check the fields data\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"http://127.0.0.1:8000/api/create_table/\",\r\n        {\r\n          name: tableName,\r\n          fields: fields,\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Table created:\", response.data);\r\n    } catch (error) {\r\n      console.error(\"Error creating table:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDeleteTable = async () => {\r\n    try {\r\n      const response = await axios.delete(\r\n        `http://127.0.0.1:8000/api/delete_table/${tableName}/`,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        }\r\n      );\r\n      console.log(\"Table deleted:\", response.data);\r\n    } catch (error) {\r\n      console.error(\"Error deleting table:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Create Table</h2>\r\n      <input\r\n        type=\"text\"\r\n        value={tableName}\r\n        onChange={(e) => setTableName(e.target.value)}\r\n        placeholder=\"Table Name\"\r\n      />\r\n      <div>\r\n        {fields.map((field, index) => (\r\n          <div key={index}>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={field.name}\r\n              onChange={(e) => handleFieldChange(index, e)}\r\n              placeholder=\"Field Name\"\r\n            />\r\n            <select\r\n              name=\"type\"\r\n              value={field.type}\r\n              onChange={(e) => handleFieldChange(index, e)}\r\n            >\r\n              <option value=\"\">Select Type</option>\r\n              {fieldTypes.map((type, i) => (\r\n                <option key={i} value={type}>\r\n                  {type}\r\n                </option>\r\n              ))}\r\n            </select>\r\n            <label>\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={field.is_unique}\r\n                onChange={() => handleUniqueChange(index)}\r\n              />\r\n              Unique\r\n            </label>\r\n            <button onClick={() => handleDeleteField(index)}>\r\n              Delete Field\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <button onClick={handleAddField}>Add Field</button>\r\n      <button onClick={handleCreateTable}>Create Table</button>\r\n      <button onClick={handleDeleteTable}>Delete Table</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}